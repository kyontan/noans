- form_last = session[:form_error].clone unless session[:form_error].nil?
- form_last = {:redirect => false} if form_last.nil?
- session[:form_error] = nil
-#これはひどい
.form#register
	.titleD<
		%span.titleS 新規登録
	%form(method = "post" action = "#{request.script_name}/register/confirm/" name = "register")
		%label 名前
		%input(type = "text" name = "name" required autofocus value = "#{form_last[:name]}")
		%br.clear
		- if form_last[:redirect]
			- if form_last[:name] == ""
				%span.warn< Error: 名前が入力されていません
				%br.clear
		-#%label 学籍番号
		-#%input(type = "text" name = "studentID")
		-#%br.clear
		%label<
			メールアドレス
			%small> &nbsp;(任意)
		%input(type = "email" name = "mail" value = "#{form_last[:email]}")
		%br.clear

		%label<
			ID
			%small> &nbsp;(半角英数字:4文字以上)
		%input(type = "text" name = "id" required value = "#{form_last[:id]}")
		%br.clear
		- if form_last[:redirect]
			- if form_last[:id] == ""
				%span.warn< Error: IDが入力されていません
				%br.clear
			- if form_last[:id].length < 4
				%span.warn< Error: IDが短すぎます
				%br.clear

		%label
			パスワード
			%small> &nbsp;(6文字以上)
		%input#pass(type = "password" name = "pass" required)
		%br.clear
		- if form_last[:redirect]
			- if form_last[:pass] == ""
				%span.warn< Error: パスワードが入力されていません
				%br.clear
			- if form_last[:pass].length < 6
				%span.warn< Error: パスワードが短すぎます
				%br.clear

		%input(type = "hidden" name = "_csrf" value = "#{csrf_token}")
		-#= csrf_tag
		%input.button(type = "submit" value = "登録")
		-#%input.button.blue type = "submit", onclick = "return convert_newac()"}
		%br.clear
